<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Código - Knowledge Base</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./static/css/style.css">
    <link rel="stylesheet" href="./static/css/code-analysis.css">
</head>
<body>
    <!-- Barra de navegação -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-code me-2"></i>
                <span class="fw-bold">Knowledge Base</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#languages-section">Linguagens</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/code_analysis">Analisar Código</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/api/stats" target="_blank">API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#contact-section">Contato</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Cabeçalho da página -->
    <div class="container mt-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="display-5 fw-bold text-primary mb-3">
                    <i class="fas fa-search-code me-2"></i>Analisador de Código
                </h1>
                <p class="lead">Analise seu código em tempo real e receba sugestões de melhoria</p>
            </div>
            <div class="col-md-4 text-end">
                <div class="language-stats p-3">
                    <div class="d-flex justify-content-between">
                        <div class="stat-item">
                            <div class="stat-value" id="total-analyses">0</div>
                            <div class="stat-label">Análises</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="avg-score">-</div>
                            <div class="stat-label">Pontuação Média</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="top-language">-</div>
                            <div class="stat-label">Top Linguagem</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Área principal -->
    <div class="container code-analysis-container">
        <div class="row">
            <!-- Painel esquerdo - Editor -->
            <div class="col-lg-8">
                <div class="code-editor-section">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="mb-0"><i class="fas fa-edit me-2"></i>Editor de Código</h3>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="auto-save-toggle" checked>
                            <label class="form-check-label" for="auto-save-toggle">Auto-salvar</label>
                        </div>
                    </div>

                    <!-- Seletor de linguagem -->
                    <div class="mb-4">
                        <label for="language-select" class="form-label fw-bold">
                            <i class="fas fa-language me-2"></i>Selecione a Linguagem
                        </label>
                        <div class="d-flex gap-2">
                            <select class="form-select" id="language-select">
                                <option value="python">Python</option>
                                <option value="javascript">JavaScript</option>
                                <option value="java">Java</option>
                                <option value="cpp">C++</option>
                                <option value="php">PHP</option>
                                <option value="ruby">Ruby</option>
                                <option value="rust">Rust</option>
                                <option value="go">Go</option>
                                <option value="swift">Swift</option>
                                <option value="typescript">TypeScript</option>
                            </select>
                            <button type="button" class="btn btn-outline-secondary" id="detect-language">
                                <i class="fas fa-magic me-2"></i>Detectar
                            </button>
                        </div>
                    </div>

                    <!-- Dicas da linguagem -->
                    <div id="language-tips" class="alert alert-info alert-dismissible fade show" role="alert">
                        <i class="fas fa-lightbulb me-2"></i>
                        <span id="tips-content">Dicas da linguagem serão mostradas aqui</span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <!-- Área do código -->
                    <div class="code-input-container">
                        <label for="code-input" class="form-label fw-bold">
                            <i class="fas fa-file-code me-2"></i>Insira seu código
                        </label>
                        <textarea 
                            id="code-input" 
                            class="form-control" 
                            placeholder="// Digite seu código aqui..."
                            rows="15"
                            spellcheck="false"
                        ></textarea>
                        <div class="mt-2 text-end">
                            <small class="text-muted">
                                <span id="char-count">0</span> caracteres | 
                                <span id="line-count">0</span> linhas
                            </small>
                        </div>
                    </div>

                    <!-- Barra de ferramentas -->
                    <div class="code-toolbar">
                        <button id="submit-code" class="btn btn-primary btn-action">
                            <i class="fas fa-play me-2"></i>Analisar Código
                        </button>
                        <button id="clear-code" class="btn btn-outline-secondary btn-action">
                            <i class="fas fa-broom me-2"></i>Limpar
                        </button>
                        <button id="quick-example" class="btn btn-outline-success btn-action">
                            <i class="fas fa-bolt me-2"></i>Exemplo Rápido
                        </button>
                        <button id="format-code" class="btn btn-outline-info btn-action">
                            <i class="fas fa-indent me-2"></i>Formatar
                        </button>
                        <button id="copy-code" class="btn btn-outline-warning btn-action">
                            <i class="fas fa-copy me-2"></i>Copiar Código
                        </button>
                    </div>

                    <!-- Atalhos de teclado -->
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-keyboard me-1"></i> Atalhos: 
                            <kbd>Ctrl</kbd> + <kbd>Enter</kbd> para analisar | 
                            <kbd>Ctrl</kbd> + <kbd>S</kbd> para salvar | 
                            <kbd>Ctrl</kbd> + <kbd>L</kbd> para limpar
                        </small>
                    </div>
                </div>
            </div>

            <!-- Painel direito - Informações -->
            <div class="col-lg-4">
                <!-- Painel de dicas -->
                <div class="card mb-4 shadow">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Boas Práticas</h5>
                    </div>
                    <div class="card-body">
                        <div id="best-practices-list" class="list-group list-group-flush">
                            <div class="list-group-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                Use nomes descritivos para variáveis e funções
                            </div>
                            <div class="list-group-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                Mantenha funções pequenas e com uma única responsabilidade
                            </div>
                            <div class="list-group-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                Comente seu código de forma clara e objetiva
                            </div>
                            <div class="list-group-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                Trate erros e casos excepcionais
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Painel de linguagens populares -->
                <div class="card mb-4 shadow">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Linguagens Mais Analisadas</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="language-chart" width="100%" height="200"></canvas>
                        <div class="mt-3">
                            <small class="text-muted">
                                <i class="fas fa-sync-alt me-1"></i> Atualizado em tempo real
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Painel de recursos úteis -->
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="fas fa-tools me-2"></i>Recursos Úteis</h5>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <a href="https://eslint.org/" target="_blank" class="list-group-item list-group-item-action">
                                <i class="fab fa-js-square text-warning me-2"></i>
                                ESLint - Linter para JavaScript
                            </a>
                            <a href="https://pylint.org/" target="_blank" class="list-group-item list-group-item-action">
                                <i class="fab fa-python text-primary me-2"></i>
                                Pylint - Linter para Python
                            </a>
                            <a href="https://checkstyle.sourceforge.io/" target="_blank" class="list-group-item list-group-item-action">
                                <i class="fab fa-java text-danger me-2"></i>
                                Checkstyle - Linter para Java
                            </a>
                            <a href="https://clang.llvm.org/extra/clang-tidy/" target="_blank" class="list-group-item list-group-item-action">
                                <i class="fas fa-cog me-2"></i>
                                Clang-Tidy - Linter para C/C++
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resultados da análise -->
        <div id="analysis-results" class="analysis-result-container" style="display: none;">
            <div class="analysis-header">
                <h3 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Resultado da Análise</h3>
                <div id="score-display">
                    <!-- Pontuação será inserida aqui dinamicamente -->
                </div>
            </div>

            <div id="analysis-content">
                <!-- Conteúdo da análise será inserido aqui dinamicamente -->
            </div>

            <div class="mt-4">
                <button id="share-analysis" class="btn btn-outline-primary me-2">
                    <i class="fas fa-share-alt me-2"></i>Compartilhar
                </button>
                <button id="export-analysis" class="btn btn-outline-success me-2">
                    <i class="fas fa-file-export me-2"></i>Exportar PDF
                </button>
                <button id="save-analysis" class="btn btn-outline-info">
                    <i class="fas fa-save me-2"></i>Salvar Análise
                </button>
            </div>
        </div>

        <!-- Histórico de análises (recentes) -->
        <div class="card mt-4 shadow">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0"><i class="fas fa-history me-2"></i>Análises Recentes</h5>
            </div>
            <div class="card-body">
                <div id="recent-analyses" class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Linguagem</th>
                                <th>Linhas</th>
                                <th>Pontuação</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="recent-analyses-body">
                            <!-- Histórico será inserido aqui dinamicamente -->
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-3">
                    <button id="clear-history" class="btn btn-sm btn-outline-danger">
                        <i class="fas fa-trash me-2"></i>Limpar Histórico
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5 class="mb-3">Knowledge Base</h5>
                    <p>Ferramenta completa para análise e aprendizado de linguagens de programação.</p>
                    <div class="d-flex mt-3">
                        <a href="#" class="text-white me-3"><i class="fab fa-github fa-2x"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter fa-2x"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-linkedin fa-2x"></i></a>
                    </div>
                </div>
                <div class="col-md-3">
                    <h5 class="mb-3">Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/" class="text-white text-decoration-none">Home</a></li>
                        <li class="mb-2"><a href="/code_analysis" class="text-white text-decoration-none">Analisador</a></li>
                        <li><a href="/api/stats" class="text-white text-decoration-none">API</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5 class="mb-3">Suporte</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> suporte@knowledgebase.com</li>
                        <li><i class="fas fa-question-circle me-2"></i> FAQ</li>
                    </ul>
                </div>
            </div>
            <hr class="mt-4 mb-4 bg-light">
            <div class="text-center">
                <p class="mb-0">© 2024 Dione Castro Alves - InNovaIdeia Assessoria em Tecnologia ®</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Scripts personalizados -->
    <script src="static/js/code-analysis.js"></script>
    <script>
        // Inicializar quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof CodeAnalyzer !== 'undefined') {
                const analyzer = new CodeAnalyzer();
                analyzer.init();
            }
        });
    </script>
</body>
</html>